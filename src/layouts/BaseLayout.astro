---
interface Props {
  title: string;
  description?: string;
  activePage?: 'overview' | 'about' | 'products' | 'blog';
}

const { title, description = "Kazuya Yoshida - Software Engineer & Developer Portfolio", activePage = 'overview' } = Astro.props;

import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';
---

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content={description}>
  <title>{title}</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Devicons (for skills section) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css">
</head>
<body>
  <Navbar activePage={activePage} />

  <main>
    <slot />
  </main>

  <Footer />

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom Scripts -->
  <script>
    // Navbar Scroll Effect
    const navbar = document.querySelector('.navbar-custom');

    function handleNavbarScroll() {
      if (window.scrollY > 50) {
        navbar?.classList.add('scrolled');
      } else {
        navbar?.classList.remove('scrolled');
      }
    }

    window.addEventListener('scroll', handleNavbarScroll);
    handleNavbarScroll();

    // Scroll Animations (Intersection Observer)
    const animateOnScrollElements = document.querySelectorAll('.animate-on-scroll');

    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    animateOnScrollElements.forEach(el => observer.observe(el));

    // Mobile Menu Auto-Close
    const navLinks = document.querySelectorAll('.nav-link-custom');
    const navbarCollapse = document.querySelector('.navbar-collapse');

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (navbarCollapse?.classList.contains('show')) {
          const bsCollapse = (window as any).bootstrap?.Collapse?.getInstance(navbarCollapse);
          if (bsCollapse) bsCollapse.hide();
        }
      });
    });

    // Console Message
    console.log('%c Welcome to Kazuya Yoshida\'s Portfolio! ',
      'background: linear-gradient(135deg, #c9a227, #f4d03f); color: #0a0a0f; font-size: 14px; font-weight: bold; padding: 10px; border-radius: 5px;');
  </script>
</body>
</html>
